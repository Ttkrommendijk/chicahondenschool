---
import BaseLayout from "../../layouts/BaseLayout.astro";
import Hero from "../../components/Hero.astro";
import ServiceCards from "../../components/ServiceCards.astro";
import { localize, resolveLangFromUrl } from "../../i18n";
import { dienstenIndexPage } from "../../data/diensten";
import { ui } from "../../data/ui";

const lang = resolveLangFromUrl(Astro.url);
---

<BaseLayout
    title={localize(dienstenIndexPage.seo.title, lang)}
    description={localize(dienstenIndexPage.seo.description, lang)}
>
    <Hero
        title={localize(dienstenIndexPage.hero.title, lang)}
        subtitle={localize(dienstenIndexPage.hero.subtitle, lang)}
        titleKey="diensten.index.hero.title"
        subtitleKey="diensten.index.hero.subtitle"
        imageSrc="/images/services/detectie.jpg"
        imageAlt={localize(dienstenIndexPage.hero.title, lang)}
        imageAltKey="diensten.index.hero.title"
        primaryCta={{
            label: localize(ui.common.contact, lang),
            href: "/contact/",
        }}
        primaryCtaLabelKey="ui.common.contact"
    />

    <ServiceCards
        title={localize(dienstenIndexPage.hero.title, lang)}
        titleKey="diensten.index.hero.title"
        items={dienstenIndexPage.categories.map((category, index) => ({
            title: localize(category.title, lang),
            description: localize(category.excerpt, lang),
            href: category.href,
            ctaLabel: localize(category.buttonLabel, lang),
            titleKey: `diensten.index.categories.${index}.title`,
            descriptionKey: `diensten.index.categories.${index}.excerpt`,
            ctaLabelKey: `diensten.index.categories.${index}.buttonLabel`,
        }))}
    />
</BaseLayout>
