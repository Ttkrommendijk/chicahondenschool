---
import BaseLayout from "../../layouts/BaseLayout.astro";
import BadgeRow from "../../components/BadgeRow.astro";
import CalloutBand from "../../components/CalloutBand.astro";
import CTASection from "../../components/CTASection.astro";
import { page } from "../../data/over";
import { localize, resolveLangFromUrl } from "../../i18n";

const lang = resolveLangFromUrl(Astro.url);
---

<BaseLayout
    title={localize(page.seo.title, lang)}
    description={localize(page.seo.description, lang)}
>
    <section class="section">
        <div class="container">
            <div
                class="rounded-3xl border border-main/40 bg-gradient-to-br from-main-soft via-white to-secondary-soft px-5 py-7 md:px-8 md:py-9"
            >
                <div
                    class="grid items-center gap-6 md:grid-cols-[minmax(240px,360px),1fr]"
                >
                    <div class="mx-auto w-full max-w-[360px]">
                        <img
                            src={page.hero.imageSrc}
                            alt={localize(page.hero.imageAlt, lang)}
                            class="h-auto max-h-[320px] w-full rounded-2xl border border-main/60 object-cover shadow-lg md:max-h-[400px]"
                            loading="eager"
                        />
                        <p
                            class="mt-2 text-sm text-detail/80"
                            data-i18n="over.page.hero.meta"
                        >
                            {localize(page.hero.meta, lang)}
                        </p>
                    </div>
                    <div>
                        <h1
                            class="text-4xl font-extrabold leading-tight text-secondary md:text-5xl"
                            data-i18n="over.page.hero.title"
                        >
                            {localize(page.hero.title, lang)}
                        </h1>
                        <p
                            class="mt-4 max-w-3xl text-lg font-medium text-main-dark/90"
                            data-i18n="over.page.hero.lead"
                        >
                            {localize(page.hero.lead, lang)}
                        </p>
                        <p class="mt-3 text-text">
                            <a
                                href={page.hero.link.href}
                                data-i18n="over.page.hero.link.label"
                                >{localize(page.hero.link.label, lang)}</a
                            ><span data-i18n="over.page.hero.link.textAfter"
                                >{
                                    localize(page.hero.link.textAfter, lang)
                                }</span
                            >
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="section">
        <div class="container">
            <div
                class="rounded-2xl border border-secondary/20 bg-white px-6 py-6"
            >
                <h2
                    class="text-3xl font-bold tracking-tight text-secondary md:text-4xl"
                    data-i18n="over.page.experience.title"
                >
                    {localize(page.experience.title, lang)}
                </h2>
                <div class="mt-4">
                    <BadgeRow
                        items={page.hero.trustPoints.map((item) =>
                            localize(item, lang),
                        )}
                        itemKeys={page.hero.trustPoints.map(
                            (_, index) => `over.page.hero.trustPoints.${index}`,
                        )}
                    />
                </div>
                <ul class="mt-4 grid gap-2 md:grid-cols-2">
                    {
                        page.experience.facts.map((fact, index) => (
                            <li class="rounded-xl border border-secondary/20 bg-secondary-soft/60 px-4 py-3 text-text">
                                <span
                                    data-i18n={`over.page.experience.facts.${index}`}
                                >
                                    {localize(fact, lang)}
                                </span>
                            </li>
                        ))
                    }
                </ul>
                <p
                    class="mt-4 max-w-3xl text-text"
                    data-i18n="over.page.experience.intro"
                >
                    {localize(page.experience.intro, lang)}
                </p>
                <ol class="mt-4 relative border-l-2 border-main/60 pl-6">
                    {
                        page.experience.timeline.map((item, index) => (
                            <li class="relative mb-4">
                                <span class="absolute -left-[1.95rem] top-1.5 h-3.5 w-3.5 rounded-full border-2 border-secondary bg-main" />
                                <div class="rounded-xl border border-secondary/20 bg-white/90 px-4 py-3">
                                    <p
                                        class="m-0 text-text"
                                        data-i18n={`over.page.experience.timeline.${index}`}
                                    >
                                        {localize(item, lang)}
                                    </p>
                                </div>
                            </li>
                        ))
                    }
                </ol>
            </div>
        </div>
    </section>

    <section class="section">
        <div class="container">
            <h2
                class="text-3xl font-bold tracking-tight text-secondary md:text-4xl"
                data-i18n="over.page.howIWork.title"
            >
                {localize(page.howIWork.title, lang)}
            </h2>
            <p
                class="mt-3 max-w-3xl text-lg font-medium text-main-dark/90"
                data-i18n="over.page.howIWork.lead"
            >
                {localize(page.howIWork.lead, lang)}
            </p>
            <div class="mt-4 grid gap-4 md:grid-cols-2">
                {
                    page.howIWork.items.map((item, index) => (
                        <article
                            class:list={[
                                "rounded-2xl border px-5 py-5",
                                index % 2 === 0
                                    ? "border-main/40 bg-main-soft/70"
                                    : "border-secondary/30 bg-secondary-soft/70",
                            ]}
                        >
                            <h3
                                class="mb-2 text-lg"
                                data-i18n={`over.page.howIWork.items.${index}.title`}
                            >
                                {localize(item.title, lang)}
                            </h3>
                            <p
                                class="m-0 text-text"
                                data-i18n={`over.page.howIWork.items.${index}.text`}
                            >
                                {localize(item.text, lang)}
                            </p>
                        </article>
                    ))
                }
            </div>
            <p class="mt-4 text-text">
                <a
                    href={page.howIWork.link.href}
                    data-i18n="over.page.howIWork.link.label"
                    >{localize(page.howIWork.link.label, lang)}</a
                ><span data-i18n="over.page.howIWork.link.textAfter"
                    >{localize(page.howIWork.link.textAfter, lang)}</span
                >
            </p>
        </div>
    </section>

    <section class="section">
        <div class="container">
            <div
                class="rounded-2xl border border-secondary/20 bg-white px-6 py-6"
            >
                <h2
                    class="text-3xl font-bold tracking-tight text-secondary md:text-4xl"
                    data-i18n="over.page.whoAmI.title"
                >
                    {localize(page.whoAmI.title, lang)}
                </h2>
                <p
                    class="mt-3 max-w-3xl text-lg font-medium text-main-dark/90"
                    data-i18n="over.page.whoAmI.lead"
                >
                    {localize(page.whoAmI.lead, lang)}
                </p>
                <div class="mt-4 space-y-4">
                    {
                        page.whoAmI.paragraphs.map((paragraph, index) => (
                            <p
                                class="max-text"
                                data-i18n={`over.page.whoAmI.paragraphs.${index}`}
                            >
                                {localize(paragraph, lang)}
                            </p>
                        ))
                    }
                </div>
                <p class="mt-4 text-text">
                    <a
                        href={page.whoAmI.link.href}
                        data-i18n="over.page.whoAmI.link.label"
                        >{localize(page.whoAmI.link.label, lang)}</a
                    ><span data-i18n="over.page.whoAmI.link.textAfter"
                        >{localize(page.whoAmI.link.textAfter, lang)}</span
                    >
                </p>
            </div>
        </div>
    </section>

    <CalloutBand
        title={localize(page.callout.title, lang)}
        text={localize(page.callout.text, lang)}
        titleKey="over.page.callout.title"
        textKey="over.page.callout.text"
    />

    <CTASection
        title={localize(page.finalCta.title, lang)}
        text={localize(page.finalCta.text, lang)}
        titleKey="over.page.finalCta.title"
        textKey="over.page.finalCta.text"
        primary={{
            label: localize(page.finalCta.contact.label, lang),
            href: page.finalCta.contact.href,
        }}
        primaryLabelKey="over.page.finalCta.contact.label"
        secondary={{
            label: localize(page.finalCta.services.label, lang),
            href: page.finalCta.services.href,
        }}
        secondaryLabelKey="over.page.finalCta.services.label"
    />
</BaseLayout>
